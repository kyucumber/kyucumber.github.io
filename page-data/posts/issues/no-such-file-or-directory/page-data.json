{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/issues/no-such-file-or-directory","result":{"data":{"markdownRemark":{"id":"afb393c9-28ea-56a4-b8d2-8cf49f6b9a63","html":"<p>파트 내에서 사용할 CI 환경 구성 중 Embedded Redis를 사용해 테스트를 실행하는 모듈의 테스트가 지속적으로 실패하는 문제를 겪었습니다.</p>\n<p>로컬이나 다른 이미지에서는 빌드가 성공했기 때문에 관련 내용을 별도 찾아볼 필요 없이 이미지 변경으로 해결은 가능했지만\n왜 해당 이미지에서만 테스트가 구동되지 않는지 관련 내용을 찾아보고 정리했습니다.</p>\n<p>실패한 이미지에서 발생한 에러 메세지는 아래와 같습니다.</p>\n<deckgo-highlight-code language=\"bash\"  terminal=\"carbon\" theme=\"dracula\" >\n          <code slot=\"code\">2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]         at java.lang.Thread.run(Thread.java:748)\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]         Caused by:\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]         java.io.IOException: Cannot run program &quot;/tmp/1617020629467-0/redis-server-3.0.7&quot; (in directory &quot;/tmp/1617020629467-0&quot;): error=2, No such file or directory\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]             at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]             at redis.embedded.AbstractRedisInstance.start(AbstractRedisInstance.java:34)\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]             ... 85 more\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]             Caused by:\n2021-03-29T21:23:49.643+0900 [DEBUG] [TestEventLogger]             java.io.IOException: error=2, No such file or directory</code>\n        </deckgo-highlight-code>\n<p><code class=\"language-text\">No such file or directory</code> 메세지만 보고 바이너리를 해당 경로에 복사하거나 하는 과정이 누락된 것이라고 생각했습니다.\n하지만 실제 해당 경로를 체크했을 때 실제 바이너리 파일은 정상적으로 해당 경로에 위치하고 있었습니다.</p>\n<p>삽질을 계속하다가 해당 이미지에서 직접 바이너리를 실행시켜보니 아래와 같이 바이너리 파일이\n존재하는데도 아래와 같이 <code class=\"language-text\">No such file or directory</code> 에러가 노출되는것을 확인할 수 있었습니다.</p>\n<deckgo-highlight-code language=\"bash\"  terminal=\"carbon\" theme=\"dracula\" >\n          <code slot=\"code\">bash-4.4# uname -a\nLinux 490bc54ba0f4 4.14.214-160.339.amzn2.x86_64 #1 SMP Sun Jan 10 05:53:05 UTC 2021 x86_64 Linux\n\nbash-4.4# ls -al\n\n-rwxr-xr-x    1 root     root       4311368 Mar 29 20:35 redis-server-3.0.7\n-rwxr-xr-x    1 root     root        927664 Mar 29 20:35 redis-server-3.0.7-darwin\n\nbash-4.4# ./redis-server-3.0.7\nbash: ./redis-server-3.0.7: No such file or directory</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://askubuntu.com/questions/133389/no-such-file-or-directory-but-the-file-exists\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://askubuntu.com/questions/133389/no-such-file-or-directory-but-the-file-exists</a></p>\n<p>파일을 찾지 못하는 경우 뿐만 아니라 운영체제 별 필요한 런타임 구성 요소가 누락되는\n경우도 <code class=\"language-text\">No such file or directory</code>라는 형태로 에러가 출력될 수 있다는 것을 알수 있었습니다.</p>\n<p>위 에러가 발생한 케이스는 해당 Embedded Redis 라이브러리에서 사용하는 Redis 바이너리 자체가 alpine에서 구동되지 않는 문제라 결국은 CI에 사용하는 이미지를 교체해 해결했습니다.</p>","tableOfContents":"","fields":{"slug":"/posts/issues/no-such-file-or-directory","tagSlugs":["/tag/os/","/tag/embedded-redis/"]},"frontmatter":{"date":"2021-03-29T00:00:00.000Z","description":"파일이 존재하는데도 No such file or directory 에러가 발생하는 이슈 정리","tags":["Os","EmbeddedRedis"],"title":"파일이 존재하는데도 No such file or directory 에러가 발생하는 경우","socialImage":{"publicURL":"/static/3fb2d4de4502fbae8b21ee45fe945cf4/kyucumber.jpg"}}}},"pageContext":{"slug":"/posts/issues/no-such-file-or-directory"}},"staticQueryHashes":["2067870509","251939775","401334301"]}